<div {...$$restProps}
     class="{$$restProps.class ?? ''} content margin"
     class:content--active={active}
     id={controlLabel}
     aria-hidden={!active}
     aria-labelledby={controlLabel}
     role="tabpanel"
     tabindex={active ? 0 : -1}>
  {#if $$slots.header}
    <div bind:this={header}
         style="display: none">
      <slot name="header" />
    </div>
  {/if}
  <slot />
</div>

<script >import { onMount, onDestroy, getContext } from 'svelte';
;
import { genControlLabel } from './utils';
export let label;
const key = {};
let active = false;
let header;
$: if (header) {
    header.firstChild
        .removeAttribute('slot');
}
const tabsData = getContext('tabs');
if (!tabsData)
    throw new Error('Tab should be nested inside a Tabs');
$: tabsData.tabs.update(tabs => (tabs.map(t => t.key === key ? Object.assign(Object.assign({}, t), { label, header }) : t)));
onMount(() => {
    tabsData.tabs.update(tabs => [...tabs, {
            key,
            label,
            header,
            show: () => active = true,
            hide: () => active = false,
        }
    ]);
});
onDestroy(() => {
    tabsData.tabs.update(tabs => (tabs.filter(t => t.key !== key)));
});
$: controlLabel = genControlLabel(label);
</script>

<style>
.content--active {
  display: block !important;
}
</style>
