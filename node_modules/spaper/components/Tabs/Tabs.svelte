<div {...$$restProps}
     class="row flex-{placement} tabs {$$restProps.class ?? ''}"
     style="text-align: {contentAlign}">
  {#each $tabs as { label, header }, index}
    {@const selected = index == activeTab}
    <div class="tabs-label-header"
         class:tabs-label-header--active={selected}
         aria-selected={selected}
         aria-controls={genControlLabel(label)}
         role="tab"
         tabindex={selected ? 0 : -1}
         on:click={showContent.bind(null, index)}>
      {#if header}
        {@html header.innerHTML}
      {:else}
        {label}
      {/if}
    </div>
  {/each}

  <slot />
</div>

<script >import { onMount, setContext, createEventDispatcher } from 'svelte';
import { writable } from 'svelte/store';
;
;
import { genControlLabel } from './utils';
export let activeTab = 0;
export let placement = 'spaces';
export let contentAlign = 'left';
const dispatch = createEventDispatcher();
const tabs = writable([]);
const tabsData = {
    activeTab,
    tabs,
};
setContext('tabs', tabsData);
onMount(() => {
    if (isNaN(Number(activeTab)))
        activeTab = 0;
    if (!$tabs.length)
        return;
    $tabs[activeTab].show();
});
function showContent(index) {
    dispatch('change', index);
    activeTab = index;
    updateTabsVisility();
}
function updateTabsVisility() {
    $tabs.forEach((tab, idx) => {
        if (idx == activeTab)
            tab.show();
        else
            tab.hide();
    });
}
$: activeTab && updateTabsVisility();
</script>

<style >.tabs-label-header {
  cursor: pointer;
  color: var(--primary-light);
  display: inline-block;
  font-weight: 600;
  margin: 0 0 -1px;
  padding: 0.75rem;
  text-align: center;
}
.tabs-label-header:hover:not(.tabs-label-header--active) {
  color: var(--muted);
}
.tabs-label-header--active {
  color: var(--primary);
  border-bottom: 3px solid var(--secondary);
}

:global(.tabs input) {
  display: block;
}

:global(.tabs label) {
  all: inherit;
}
:global(.tabs label):hover {
  all: inherit;
}</style>
