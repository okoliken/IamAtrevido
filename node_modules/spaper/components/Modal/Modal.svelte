<svelte:window on:keydown={handleKeydown} />

<div class="modal"
     class:active>
  <div {...$$restProps}
       class="{$$restProps.class ?? ''} modal-body">
    <CloseButton on:click={close} />
    {#if title}
      <h4 class="modal-title">{title}</h4>
    {/if}
    {#if subTitle}
      <h5 class="modal-subtitle">{subTitle}</h5>
    {/if}
    <p class="modal-text">
      {#if content}
        {content}
      {:else if component}
        <svelte:component this={component} />
      {:else}
        <slot />
      {/if}
    </p>
    <footer>
      {#if $$slots.footer}
        <slot name="footer" />
      {/if}
      <Button on:click={close}>
        {closeBtnText}
      </Button>
    </footer>
  </div>
</div>

<script >import { createEventDispatcher, SvelteComponent } from 'svelte';
import Button from '../Button.svelte';
import CloseButton from '../CloseButton.svelte';
export let active = false;
export let title = '';
export let subTitle = '';
export let content = '';
export let component = null;
export let closeBtnText = 'Close';
const dispatch = createEventDispatcher();
function close() {
    active = false;
}
function handleKeydown({ key }) {
    if (key === 'Escape')
        close();
}
$: if (!active) {
    dispatch('close');
}
</script>

<style >.modal.active {
  opacity: 1;
  visibility: visible;
}
.modal.active .modal-body {
  top: 50%;
}</style>
